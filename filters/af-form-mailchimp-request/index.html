<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
  <!--<![endif]-->
  <head>
    <meta charset="utf-8" />

<title>af/form/mailchimp/request &#8211; Advanced Forms Documentation</title>


<link rel="canonical" href="" />
<link
  href="https://advancedforms.github.io/feed.xml"
  type="application/atom+xml"
  rel="alternate"
  title="Advanced Forms Documentation Feed"
/>

<meta name="description" content="Wordpress plugin for creating flexible and developer-friendly forms using the power of Advanced Custom Fields
" />

<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- For all browsers -->
<link rel="stylesheet" href="https://advancedforms.github.io/assets/css/style.css" />

<meta http-equiv="cleartype" content="on" />

<meta property="og:title" content="Advanced Forms Documentation" />
<meta property="og:description" content="Wordpress plugin for creating flexible and developer-friendly forms using the power of Advanced Custom Fields
" />
<meta property="og:site_name" content="Advanced Forms" />
<meta property="og:type" content="website" />
<meta
  property="og:image"
  content="https://advancedforms.github.io/assets/images/icon-128x128.png"
/>

<script src="https://advancedforms.github.io/assets/js/autocomplete.min.js"></script>
<script src="https://advancedforms.github.io/assets/js/elasticlunr.min.js"></script>

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="https://advancedforms.github.io/assets/js/vendor/html5shiv.min.js"></script>
  <script src="https://advancedforms.github.io/assets/js/vendor/respond.min.js"></script>
<![endif]-->

  </head>

  <body>
    <header>
  <div class="container flex">
    <a class="logo-wrapper" href="/"
      ><img
        src="/assets/images/icon-128x128.png"
        class="logo"
        alt="Advanced Forms logo"
    /></a>

    <div class="search-wrapper">
      <input
        type="text"
        class="search"
        id="search"
        placeholder="Search guides, actions and filters..."
      />
    </div>
  </div>
</header>


    <div class="main container">
      <div class="post">
        <div class="breadcrumb"><a href="/">Home</a> › af/form/mailchimp/request</div>
        <h1>af/form/mailchimp/request</h1>
         <p>Change the Mailchimp API request before it’s sent. The request is for the <a href="https://mailchimp.com/developer/marketing/api/list-members/add-member-to-list/">“Add member to list” endpoint</a>.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">function</span> <span class="nf">modify_mailchimp_request</span><span class="p">(</span> <span class="nv">$request</span><span class="p">,</span> <span class="nv">$form</span><span class="p">,</span> <span class="nv">$args</span> <span class="p">)</span> <span class="p">{</span>
    <span class="c1">// The request body is JSON encoded so we must first decode it
</span>    <span class="nv">$body</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span> <span class="nv">$request</span><span class="p">[</span><span class="s1">'body'</span><span class="p">],</span> <span class="kc">true</span> <span class="p">);</span>

    <span class="c1">// Set custom merge tag named "NICKNAME" from "nickname" field 
</span>    <span class="nv">$body</span><span class="p">[</span><span class="s1">'merge_fields'</span><span class="p">][</span><span class="s1">'NICKNAME'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">af_get_field</span><span class="p">(</span> <span class="s1">'nickname'</span> <span class="p">);</span>

    <span class="c1">// Re-encode the altered body as JSON
</span>    <span class="nv">$request</span><span class="p">[</span><span class="s1">'body'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span> <span class="nv">$body</span><span class="p">,</span> <span class="nx">JSON_FORCE_OBJECT</span> <span class="p">);</span>

    <span class="k">return</span> <span class="nv">$request</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">add_filter</span><span class="p">(</span> <span class="s1">'af/form/mailchimp/request'</span><span class="p">,</span> <span class="s1">'modify_mailchimp_request'</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">3</span> <span class="p">);</span>
<span class="nx">add_filter</span><span class="p">(</span> <span class="s1">'af/form/mailchimp/request/id=FORM_ID'</span><span class="p">,</span> <span class="s1">'modify_mailchimp_request'</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">3</span> <span class="p">);</span>
<span class="nx">add_filter</span><span class="p">(</span> <span class="s1">'af/form/mailchimp/request/key=FORM_KEY'</span><span class="p">,</span> <span class="s1">'modify_mailchimp_request'</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">3</span> <span class="p">);</span></code></pre></figure>
 
      </div>

      <aside class="sidebar">
        <div class="related">
          <p class="heading">Related</p>
          <ul>
              
            <li><a href="/filters/af-field-calculate_value/">af/field/calculate_value</a></li>
              
            <li><a href="/filters/af-form-editing-post-data/">af/form/editing/post_data</a></li>
              
            <li><a href="/filters/af-form-editing-user-data/">af/form/editing/user_data</a></li>
              
            <li>af/form/mailchimp/request</li>
             
          </ul>
        </div>

        <!-- Begin MailChimp Signup Form -->
        <div id="mc_embed_signup" class="newsletter-signup">
          <form
            action="//github.us14.list-manage.com/subscribe/post?u=76d2abc9cd9c93679023ba4de&amp;id=d1d49ef515"
            method="post"
            id="mc-embedded-subscribe-form"
            name="mc-embedded-subscribe-form"
            class="validate"
            target="_blank"
            novalidate
          >
            <div id="mc_embed_signup_scroll">
              <p class="heading">
                Want occasional updates about Advanced Forms?
              </p>

              <div class="mc-field-group">
                <input
                  type="email"
                  value=""
                  name="EMAIL"
                  class="required email"
                  placeholder="Your email address"
                  id="mce-EMAIL"
                />
              </div>

              <div id="mce-responses" class="clear">
                <div
                  class="response"
                  id="mce-error-response"
                  style="display:none"
                ></div>
                <div
                  class="response"
                  id="mce-success-response"
                  style="display:none"
                ></div>
              </div>
              <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
              <div
                style="position: absolute; left: -5000px;"
                aria-hidden="true"
              >
                <input
                  type="text"
                  name="b_76d2abc9cd9c93679023ba4de_d1d49ef515"
                  tabindex="-1"
                  value=""
                />
              </div>
              <div class="clear">
                <input
                  type="submit"
                  value="Subscribe to updates"
                  name="subscribe"
                  id="mc-embedded-subscribe"
                  class="btn small"
                />
              </div>
            </div>
          </form>
        </div>

        <script
          type="text/javascript"
          src="//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js"
        ></script>
        <script type="text/javascript">
          (function($) {
            window.fnames = new Array();
            window.ftypes = new Array();
            fnames[0] = "EMAIL";
            ftypes[0] = "email";
            fnames[1] = "FNAME";
            ftypes[1] = "text";
            fnames[2] = "LNAME";
            ftypes[2] = "text";
          })(jQuery);
          var $mcj = jQuery.noConflict(true);
        </script>
        <!--End mc_embed_signup-->
      </aside>
    </div>

    <script src="https://advancedforms.github.io/assets/js/script.js"></script>

<script>
  (function(i, s, o, g, r, a, m) {
    i["GoogleAnalyticsObject"] = r;
    (i[r] =
      i[r] ||
      function() {
        (i[r].q = i[r].q || []).push(arguments);
      }),
      (i[r].l = 1 * new Date());
    (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m);
  })(
    window,
    document,
    "script",
    "https://www.google-analytics.com/analytics.js",
    "ga"
  );

  ga("create", "UA-45755328-16", "auto");
  ga("send", "pageview");
</script>

  </body>
</html>
