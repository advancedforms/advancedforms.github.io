<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
  <!--<![endif]-->
  <head>
    <meta charset="utf-8" />

<title>Using calculated fields &#8211; Advanced Forms Documentation</title>


<link rel="canonical" href="" />
<link
  href="https://advancedforms.github.io/feed.xml"
  type="application/atom+xml"
  rel="alternate"
  title="Advanced Forms Documentation Feed"
/>

<meta name="description" content="Wordpress plugin for creating flexible and developer-friendly forms using the power of Advanced Custom Fields
" />

<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- For all browsers -->
<link rel="stylesheet" href="https://advancedforms.github.io/assets/css/style.css" />

<meta http-equiv="cleartype" content="on" />

<meta property="og:title" content="Advanced Forms Documentation" />
<meta property="og:description" content="Wordpress plugin for creating flexible and developer-friendly forms using the power of Advanced Custom Fields
" />
<meta property="og:site_name" content="Advanced Forms" />
<meta property="og:type" content="website" />
<meta
  property="og:image"
  content="https://advancedforms.github.io/assets/images/icon-128x128.png"
/>

<script src="https://advancedforms.github.io/assets/js/autocomplete.min.js"></script>
<script src="https://advancedforms.github.io/assets/js/elasticlunr.min.js"></script>

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="https://advancedforms.github.io/assets/js/vendor/html5shiv.min.js"></script>
  <script src="https://advancedforms.github.io/assets/js/vendor/respond.min.js"></script>
<![endif]-->

  </head>

  <body>
    <header>
  <div class="container flex">
    <a class="logo-wrapper" href="/"
      ><img
        src="/assets/images/icon-128x128.png"
        class="logo"
        alt="Advanced Forms logo"
    /></a>

    <div class="search-wrapper">
      <input
        type="text"
        class="search"
        id="search"
        placeholder="Search guides, actions and filters..."
      />
    </div>
  </div>
</header>


    <div class="main container">
      <div class="post">
        <div class="breadcrumb"><a href="/">Home</a> › Using calculated fields</div>
        <h1>Using calculated fields</h1>
         <p>Calculated fields are updated live when a form is filled out and can contain any content you’d like to. They are perfect for providing previews or to show calculated values before submission.</p>

<h2 id="adding-a-calculated-field">Adding a calculated field</h2>

<p>Calculated fields are just regular ACF fields. Go to your field group and add a new field of type “Calculated”. Next we need to configure what value this field should display which is done in the form settings. Head on over to your form settings and switch to the “Calculated” tab.</p>

<p>Under the “Calculated” tab you will find a WYSIWYG editor for each calculated field. You can add regular content and mix in field values which will be updated in real-time, similar to how field values can be included in email notifications and success messages. Mathematical arithmetic, such as addition, is not currently supported through the admin interface but can easily be achieved with a little bit of code. Read the next section for an example on how this can be done.</p>

<h2 id="customizing-calculated-value">Customizing calculated value</h2>

<p>Calculated fields are not limited to static content with mixed in fields but also support using code to define more complex calculations, for example arithmetic. Use the <code class="highlighter-rouge">af/field/calculate_value</code> filter to provide your own calculation logic.</p>

<p>Below is an example of a calculated field which display the sum of two other fields in the form called <code class="highlighter-rouge">number_field_1</code> and <code class="highlighter-rouge">number_field_2</code>. Replace <code class="highlighter-rouge">FIELD_NAME</code> in the example below with the name of your calculated field.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">function</span> <span class="nf">calculated_field_value</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Get field values (these will be updated in real-time)
</span>  <span class="nv">$val1</span> <span class="o">=</span> <span class="nx">af_get_field</span><span class="p">(</span> <span class="s1">'number_field_1'</span> <span class="p">);</span>
  <span class="nv">$val2</span> <span class="o">=</span> <span class="nx">af_get_field</span><span class="p">(</span> <span class="s1">'number_field_2'</span> <span class="p">);</span>

  <span class="c1">// Calculate the sum of the current field values
</span>  <span class="nv">$sum</span> <span class="o">=</span> <span class="nv">$val1</span> <span class="o">+</span> <span class="nv">$val2</span><span class="p">;</span>

  <span class="c1">// Display the sum in the calculated field
</span>  <span class="k">return</span> <span class="s1">'Sum: '</span> <span class="o">.</span> <span class="nv">$sum</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">add_filter</span><span class="p">(</span> <span class="s1">'af/field/calculate_value/name=FIELD_NAME'</span><span class="p">,</span> <span class="s1">'calculated_field_value'</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span> <span class="p">);</span></code></pre></figure>

<h2 id="extending-calculated-fields-with-javascript">Extending calculated fields with Javascript</h2>

<p>Using the ACF Javascript API the behaviour of calculated fields can be customized. The <code class="highlighter-rouge">af/field/calculated/value_updated</code> action is triggered when a calculated field is updated and can be used when you want use the calculated value for something more than just the field.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Intercept the rendered calculated field and insert the markup</span>
<span class="c1">// into an element with the id `#preview-container`</span>
<span class="nx">acf</span><span class="p">.</span><span class="nx">addAction</span><span class="p">(</span> <span class="s1">'af/field/calculated/value_updated/name=FIELD_NAME'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">field</span><span class="p">,</span> <span class="nx">form</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'#preview-container'</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
<span class="p">});</span></code></pre></figure>

<p>If you want to cause an update of a calculated field you can use trigger the <code class="highlighter-rouge">af/field/calculated/update_value</code>. This is convenient for example when you want to update a calculated field when the user interacts with something outside the form.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// This is the simplest format available and will trigger the update for </span>
<span class="c1">// all calculated fields on the page</span>
<span class="nx">acf</span><span class="p">.</span><span class="nx">doAction</span><span class="p">(</span> <span class="s1">'af/field/calculated/update_value'</span> <span class="p">);</span>

<span class="c1">// You may target specific fields by field name</span>
<span class="nx">acf</span><span class="p">.</span><span class="nx">doAction</span><span class="p">(</span> <span class="s1">'af/field/calculated/update_value/name=FIELD_NAME'</span> <span class="p">);</span>

<span class="c1">// You may also target specific fields by field key</span>
<span class="nx">acf</span><span class="p">.</span><span class="nx">doAction</span><span class="p">(</span> <span class="s1">'af/field/calculated/update_value/key=FIELD_KEY'</span> <span class="p">);</span></code></pre></figure>

 
        <div class="related-hooks">
          <h2>Related hooks</h2>
          <ul>
                                       
            <li>
              <a href="/filters/af-field-calculate_value/">af/field/calculate_value</a>
              <span class="detail">Filter</span>
            </li>
                                              
          </ul>
        </div>
        
      </div>

      <aside class="sidebar">
        <div class="related">
          <p class="heading">Related</p>
          <ul>
              
            <li><a href="/pro/configuration/installing-and-activating/">Installing and activating</a></li>
              
            <li><a href="/pro/configuration/configuring-mailchimp/">Configuring Mailchimp</a></li>
              
            <li><a href="/pro/configuration/connecting-zapier/">Connecting to Zapier</a></li>
              
            <li><a href="/pro/configuration/setting-up-slack-notifications/">Setting up Slack notifications</a></li>
              
            <li>Using calculated fields</li>
             
          </ul>
        </div>

        <!-- Begin MailChimp Signup Form -->
        <div id="mc_embed_signup" class="newsletter-signup">
          <form
            action="//github.us14.list-manage.com/subscribe/post?u=76d2abc9cd9c93679023ba4de&amp;id=d1d49ef515"
            method="post"
            id="mc-embedded-subscribe-form"
            name="mc-embedded-subscribe-form"
            class="validate"
            target="_blank"
            novalidate
          >
            <div id="mc_embed_signup_scroll">
              <p class="heading">
                Want occasional updates about Advanced Forms?
              </p>

              <div class="mc-field-group">
                <input
                  type="email"
                  value=""
                  name="EMAIL"
                  class="required email"
                  placeholder="Your email address"
                  id="mce-EMAIL"
                />
              </div>

              <div id="mce-responses" class="clear">
                <div
                  class="response"
                  id="mce-error-response"
                  style="display:none"
                ></div>
                <div
                  class="response"
                  id="mce-success-response"
                  style="display:none"
                ></div>
              </div>
              <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
              <div
                style="position: absolute; left: -5000px;"
                aria-hidden="true"
              >
                <input
                  type="text"
                  name="b_76d2abc9cd9c93679023ba4de_d1d49ef515"
                  tabindex="-1"
                  value=""
                />
              </div>
              <div class="clear">
                <input
                  type="submit"
                  value="Subscribe to updates"
                  name="subscribe"
                  id="mc-embedded-subscribe"
                  class="btn small"
                />
              </div>
            </div>
          </form>
        </div>

        <script
          type="text/javascript"
          src="//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js"
        ></script>
        <script type="text/javascript">
          (function($) {
            window.fnames = new Array();
            window.ftypes = new Array();
            fnames[0] = "EMAIL";
            ftypes[0] = "email";
            fnames[1] = "FNAME";
            ftypes[1] = "text";
            fnames[2] = "LNAME";
            ftypes[2] = "text";
          })(jQuery);
          var $mcj = jQuery.noConflict(true);
        </script>
        <!--End mc_embed_signup-->
      </aside>
    </div>

    <script src="https://advancedforms.github.io/assets/js/script.js"></script>

<script>
  (function(i, s, o, g, r, a, m) {
    i["GoogleAnalyticsObject"] = r;
    (i[r] =
      i[r] ||
      function() {
        (i[r].q = i[r].q || []).push(arguments);
      }),
      (i[r].l = 1 * new Date());
    (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m);
  })(
    window,
    document,
    "script",
    "https://www.google-analytics.com/analytics.js",
    "ga"
  );

  ga("create", "UA-45755328-16", "auto");
  ga("send", "pageview");
</script>

  </body>
</html>
