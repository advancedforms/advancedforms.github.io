<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
  <!--<![endif]-->
  <head>
    <meta charset="utf-8" />

<title>Creating and editing posts &#8211; Advanced Forms Documentation</title>


<link rel="canonical" href="" />
<link
  href="https://advancedforms.github.io/feed.xml"
  type="application/atom+xml"
  rel="alternate"
  title="Advanced Forms Documentation Feed"
/>

<meta name="description" content="Wordpress plugin for creating flexible and developer-friendly forms using the power of Advanced Custom Fields
" />

<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- For all browsers -->
<link rel="stylesheet" href="https://advancedforms.github.io/assets/css/style.css" />

<meta http-equiv="cleartype" content="on" />

<meta property="og:title" content="Advanced Forms Documentation" />
<meta property="og:description" content="Wordpress plugin for creating flexible and developer-friendly forms using the power of Advanced Custom Fields
" />
<meta property="og:site_name" content="Advanced Forms" />
<meta property="og:type" content="website" />
<meta
  property="og:image"
  content="https://advancedforms.github.io/assets/images/icon-128x128.png"
/>

<script src="https://advancedforms.github.io/assets/js/autocomplete.min.js"></script>
<script src="https://advancedforms.github.io/assets/js/elasticlunr.min.js"></script>

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="https://advancedforms.github.io/assets/js/vendor/html5shiv.min.js"></script>
  <script src="https://advancedforms.github.io/assets/js/vendor/respond.min.js"></script>
<![endif]-->

  </head>

  <body>
    <header>
  <div class="container flex">
    <a class="logo-wrapper" href="/"
      ><img
        src="/assets/images/icon-128x128.png"
        class="logo"
        alt="Advanced Forms logo"
    /></a>

    <div class="search-wrapper">
      <input
        type="text"
        class="search"
        id="search"
        placeholder="Search guides, actions and filters..."
      />
    </div>
  </div>
</header>


    <div class="main container">
      <div class="post">
        <div class="breadcrumb"><a href="/">Home</a> › Creating and editing posts</div>
        <h1>Creating and editing posts</h1>
         <p>A common use case for front-end forms is allowing users to create and edit posts. Maybe you want to let users submit post drafts which administrators can review and publish. Or have a post type for support issues which customers can submit and edit. Advanced Forms Pro makes it dead-simple to make forms which create and edit posts.</p>

<h2 id="configuring-your-form">Configuring your form</h2>

<p>Go to the Wordpress admin and edit the form which you want to configure. Under “Editing”, select “Posts” and you should be presented with a wide array of settings.</p>

<p>The “Post type” setting specifies which post type new posts will have. When editing a post instead the post type setting will be ignored. For the post title and content it’s possible to either select a field from which to retrieve a value or use a more complex, custom format. A custom format won’t work with post editing and should only be used for creating new posts.</p>

<p>There is also a setting for “Custom fields” which allows you to map fields from a form to a post. This enables you to create an ACF field group which is shared between a form and a post type. The selected fields will the automatically be mapped without any code.</p>

<p><img src="https://advancedforms.github.io/assets/images/editing-post-settings.png" alt="Example form configuration" /></p>

<h2 id="displaying-your-form">Displaying your form</h2>

<p>If editing has been configured for a form you will also need to specify whether to create a new post or edit an existing one. If you want to create a new post you don’t have to anything in particular. If you want to edit a post though you need to pass a post ID with the form argument <code class="highlighter-rouge">post</code>. The current post can be edited by using <code class="highlighter-rouge">current</code> instead.</p>

<p>Create a new post:
<code class="highlighter-rouge">[advanced_form form="form_key"]</code></p>

<p>Edit a post with a specific ID:
<code class="highlighter-rouge">[advanced_form form="form_key" post="1"]</code></p>

<p>Edit the currently displayed post:
<code class="highlighter-rouge">[advanced_form form="form_key" post="current"]</code></p>

<p>Of course it’s also possible to pass these arguments when using a function call:
<code class="highlighter-rouge">advanced_form( 'form_key', array( 'post' =&gt; 1 ) );</code></p>

<h2 id="creating-posts-as-draft">Creating posts as draft</h2>

<p>By default posts will be created with a status of published. This might not always be desirable if the posts first needs to be reviewed. The following code snippet can be used to create posts as drafts by default. Remember to replace <code class="highlighter-rouge">FORM_KEY</code> with your actual form key.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">function</span> <span class="nf">create_post_as_draft</span><span class="p">(</span> <span class="nv">$post_data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Set post status to draft
</span>    <span class="nv">$post_data</span><span class="p">[</span><span class="s1">'post_status'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'draft'</span><span class="p">;</span>

    <span class="k">return</span> <span class="nv">$post_data</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">add_filter</span><span class="p">(</span> <span class="s1">'af/form/editing/post_data/key=FORM_KEY'</span><span class="p">,</span> <span class="s1">'create_post_as_draft'</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span></code></pre></figure>

<h2 id="setting-the-post-thumbnail">Setting the post thumbnail</h2>

<p>The post thumbnail (also called featured image) can be set from a field using the <code class="highlighter-rouge">af/form/editing/post_created</code> action. Make sure your image field is configured to return an attachment ID.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">function</span> <span class="nf">form_created_post_thumbnail</span><span class="p">(</span> <span class="nv">$post</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nv">$image_id</span> <span class="o">=</span> <span class="nx">af_get_field</span><span class="p">(</span> <span class="s1">'IMAGE_FIELD_NAME'</span> <span class="p">);</span>
  <span class="nx">set_post_thumbnail</span><span class="p">(</span> <span class="nv">$post</span><span class="o">-&gt;</span><span class="na">ID</span><span class="p">,</span> <span class="nv">$image_id</span> <span class="p">);</span>
<span class="p">}</span>
<span class="nx">add_action</span><span class="p">(</span> <span class="s1">'af/form/editing/post_created/key=FORM_KEY'</span><span class="p">,</span> <span class="s1">'form_created_post_thumbnail'</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span></code></pre></figure>

<h2 id="redirecting-to-post-after-creation">Redirecting to post after creation</h2>

<p>To redirect to a post after creation it’s recommended to use <code class="highlighter-rouge">af/form/submission</code> with a high priority instead of <code class="highlighter-rouge">af/form/editing/post_created</code>. Otherwise there is a risk of stopping emails from being sent and integrations from working. The created post ID can be accessed by using <code class="highlighter-rouge">AF()-&gt;submission['post']</code>.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">function</span> <span class="nf">form_redirect_to_post</span><span class="p">()</span> <span class="p">{</span>
  <span class="nv">$post_id</span> <span class="o">=</span> <span class="nx">AF</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">submission</span><span class="p">[</span><span class="s1">'post'</span><span class="p">];</span>
  <span class="nv">$url</span> <span class="o">=</span> <span class="nx">get_permalink</span><span class="p">(</span> <span class="nv">$post_id</span> <span class="p">);</span>

  <span class="nx">wp_redirect</span><span class="p">(</span> <span class="nv">$url</span> <span class="p">);</span>
  <span class="k">exit</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">add_action</span><span class="p">(</span> <span class="s1">'af/form/submission/key=FORM_KEY'</span><span class="p">,</span> <span class="s1">'form_redirect_to_post'</span><span class="p">,</span> <span class="mi">20</span> <span class="p">);</span></code></pre></figure>

 
        <div class="related-hooks">
          <h2>Related hooks</h2>
          <ul>
                                                                
            <li>
              <a href="/actions/af-form-editing-post_created/">af/form/editing/post_created</a>
              <span class="detail">Action</span>
            </li>
              
            <li>
              <a href="/actions/af-form-editing-post_updated/">af/form/editing/post_updated</a>
              <span class="detail">Action</span>
            </li>
                         
          </ul>
        </div>
        
      </div>

      <aside class="sidebar">
        <div class="related">
          <p class="heading">Related</p>
          <ul>
              
            <li>Creating and editing posts</li>
              
            <li><a href="/pro/editing/creating-and-editing-users/">Creating and editing users</a></li>
             
          </ul>
        </div>

        <!-- Begin MailChimp Signup Form -->
        <div id="mc_embed_signup" class="newsletter-signup">
          <form
            action="//github.us14.list-manage.com/subscribe/post?u=76d2abc9cd9c93679023ba4de&amp;id=d1d49ef515"
            method="post"
            id="mc-embedded-subscribe-form"
            name="mc-embedded-subscribe-form"
            class="validate"
            target="_blank"
            novalidate
          >
            <div id="mc_embed_signup_scroll">
              <p class="heading">
                Want occasional updates about Advanced Forms?
              </p>

              <div class="mc-field-group">
                <input
                  type="email"
                  value=""
                  name="EMAIL"
                  class="required email"
                  placeholder="Your email address"
                  id="mce-EMAIL"
                />
              </div>

              <div id="mce-responses" class="clear">
                <div
                  class="response"
                  id="mce-error-response"
                  style="display:none"
                ></div>
                <div
                  class="response"
                  id="mce-success-response"
                  style="display:none"
                ></div>
              </div>
              <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
              <div
                style="position: absolute; left: -5000px;"
                aria-hidden="true"
              >
                <input
                  type="text"
                  name="b_76d2abc9cd9c93679023ba4de_d1d49ef515"
                  tabindex="-1"
                  value=""
                />
              </div>
              <div class="clear">
                <input
                  type="submit"
                  value="Subscribe to updates"
                  name="subscribe"
                  id="mc-embedded-subscribe"
                  class="btn small"
                />
              </div>
            </div>
          </form>
        </div>

        <script
          type="text/javascript"
          src="//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js"
        ></script>
        <script type="text/javascript">
          (function($) {
            window.fnames = new Array();
            window.ftypes = new Array();
            fnames[0] = "EMAIL";
            ftypes[0] = "email";
            fnames[1] = "FNAME";
            ftypes[1] = "text";
            fnames[2] = "LNAME";
            ftypes[2] = "text";
          })(jQuery);
          var $mcj = jQuery.noConflict(true);
        </script>
        <!--End mc_embed_signup-->
      </aside>
    </div>

    <script src="https://advancedforms.github.io/assets/js/script.js"></script>

<script>
  (function(i, s, o, g, r, a, m) {
    i["GoogleAnalyticsObject"] = r;
    (i[r] =
      i[r] ||
      function() {
        (i[r].q = i[r].q || []).push(arguments);
      }),
      (i[r].l = 1 * new Date());
    (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m);
  })(
    window,
    document,
    "script",
    "https://www.google-analytics.com/analytics.js",
    "ga"
  );

  ga("create", "UA-45755328-16", "auto");
  ga("send", "pageview");
</script>

  </body>
</html>
